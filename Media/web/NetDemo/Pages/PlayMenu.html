<!DOCTYPE html>
<html>
    <head>
        <title>PlayMenu</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="./../css/base.css" rel="stylesheet" type="text/css">
        <style>
            .PlayMenu {
                position: absolute;
                top: 45%;
                left: 65px;
                padding: 5px;
                transform: translate(0%, -50%);
            }

            .PlayMenuTitle {
                color: var(--SPPGreen);
                text-shadow: 4px 4px 4px black;
                margin-bottom: 20px;
            }            
            
        </style>
    </head>
    <body>        
        <script type="module">       
            import * as SPP from './../js/SPPMain.js';

            class PlayMenuLayer extends SPP.BlockingUILayer
            {
                constructor(InManager)
                {
                    super(InManager);

                    this.buttons = [];

                    this.htmlBlock = document.createElement("div");
                    this.htmlBlock.classList = "column-container hidden PlayMenu";

                    const title = document.createElement("div");
                    title.classList = "PlayMenuTitle fs3em";
                    title.innerHTML = "Map Type";

                    this.htmlBlock.append(title);

                    {
                        const div = document.createElement("div");
                        div.classList = "container-item selectable fs2em";
                        div.innerHTML = "Join Game";
                        div.onclick = (evt) => PlayMenuLayer.prototype.JoinGame();
                        
                        this.htmlBlock.append(div);
                        this.buttons.push(div);
                    }

                    document.body.append(this.htmlBlock);
                }

                Show()
                {
                    super.Show();
                    this.htmlBlock.classList.remove("hidden");
                }

                Hide()
                {
                    super.Hide();
                    this.htmlBlock.classList.add("hidden");
                }

                OnActivate()
                {
                    this.buttons.forEach(btn => {
                        btn.classList.add("selectable");
                    });
                    
                    this.htmlBlock.classList.remove("disabled-ui")
                }

                OnDeactivate()
                { 
                    this.buttons.forEach(btn => {
                        btn.classList.remove("selectable");
                    });

                    this.htmlBlock.classList.add("disabled-ui");
                }

                AddButton(ButtonObj)
                {
                    const div = document.createElement("div");
                    div.classList = "container-item selectable fs2em";
                    div.innerHTML = ButtonObj.label;
                    div.onclick = (evt) => PlayMenuLayer.prototype.JoinGame(ButtonObj.data);

                    this.btnContainer.append(div);
                    this.buttons.push(div);
                }

                ClearButtons()
                {
                    this.btnContainer.innerHTML = "";
                }
            }

            ////////////////////////////////////////////////////////////////
            
            let activeUImanager = new SPP.UIManager();

            const background = new SPP.BackgroundLayer(activeUImanager);
            background.SetLogoImage("./../img/logo.png");
            background.SetBackgroundImage("./../img/background.jpg");
                
            {
                const title = background.SetTitle("Joy Squad");
                title.style.fontSize = "4em";
            }

            background.Show();

            const playMenu = new PlayMenuLayer(activeUImanager);
            playMenu.Show();
            
            const footer = new SPP.FooterLayer(activeUImanager);
            footer.Show();
            
            {
                const backBtn = footer.AddButton('Back', () => { window.history.back(); });
                backBtn.style.fontSize = "0.6em";
            }

            ////////////////////////////////////////////////////////////////

            PlayMenuLayer.prototype.JoinGame = function()
            {
                window.InvokeNative("PlayMenu", `JoinGame`);

                if(window.CallNativeWithJSON == null)
                    window.location.href = "./GameMenu.html";
            }   
        </script>
    </body>
</html>
